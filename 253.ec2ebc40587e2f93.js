"use strict";(self.webpackChunkimprove=self.webpackChunkimprove||[]).push([[253],{1253:(R,a,m)=>{m.r(a),m.d(a,{ThemesModule:()=>U});var c=m(9808),u=m(6342),h=m(5939),e=m(1223);let d=(()=>{class s{constructor(t,n){this.themes=t,this.usedThemes=n,this.unusedIndexes={}}random(t){const n=this.randomIndex(t);return{theme:this.themes.get(n),index:n}}isUsed(t,n){return!this.getCachedUnused(t).includes(n)}setAsUsed(t,n){const r=this.getCachedUnused(t);r.slice(r.indexOf(n),1),this.setCachedUnused(t,r),this.usedThemes.add(t,n)}randomIndex(t){const n=this.getCachedUnused(t);return n[Math.floor(Math.random()*n.length)]}getUnusedIndexes(t){const n=this.usedThemes.list(t);return Array.from(this.themes.list().keys()).filter(r=>!n.includes(r))}getCachedUnused(t){return this.unusedIndexes[t]||(this.unusedIndexes[t]=this.getUnusedIndexes(t)||[]),this.unusedIndexes[t]}setCachedUnused(t,n){this.unusedIndexes[t]=n}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(h.OR),e.LFG(h.ic))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var l=m(9804);function p(s,o){if(1&s&&(e.ynx(0),e._uU(1),e.BQk()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.theme,"\n")}}function f(s,o){1&s&&e._uU(0,"Aucun theme ne correspond")}let g=(()=>{class s{constructor(t,n,r){this.themes=t,this.currentClass=n,this.cdr=r,this.theme=this.getRandom()}onRefresh(){this.theme=this.getRandom(),this.cdr.detectChanges()}getRandom(){const t=this.themes.random(this.currentClass.get());return this.themes.setAsUsed(this.currentClass.get(),t.index),t.theme}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d),e.Y36(l.u),e.Y36(e.sBO))},s.\u0275cmp=e.Xpm({type:s,selectors:[["improve-themes-random"]],decls:7,vars:1,consts:[[4,"ngIfNoTheme","ngIf"],["noTheme",""],["type","button",3,"click"],["routerLink","/themes"]],template:function(t,n){1&t&&(e.YNc(0,p,2,1,"ng-container",0),e.YNc(1,f,1,0,"ng-template",null,1,e.W1O),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.onRefresh()}),e._uU(4,"Refresh"),e.qZA(),e.TgZ(5,"a",3),e._uU(6,"Retour"),e.qZA()),2&t&&e.Q6J("ngIf",n.theme)},directives:[c.O5,u.yS],styles:[""],changeDetection:0}),s})(),T=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["improve-themes-home"]],decls:7,vars:0,consts:[["routerLink","/themes/random"],["routerLink","/themes/list"]],template:function(t,n){1&t&&(e.TgZ(0,"ul")(1,"li")(2,"a",0),e._uU(3,"Al\xe9atoire"),e.qZA()(),e.TgZ(4,"li")(5,"a",1),e._uU(6,"Liste"),e.qZA()()())},directives:[u.yS],styles:[""],changeDetection:0}),s})();var i=m(2382);function C(s,o){if(1&s&&(e.TgZ(0,"div"),e._UZ(1,"input",5),e._uU(2),e.qZA()),2&s){const t=o.index,n=e.oxw();e.xp6(1),e.Q6J("formControlName",t),e.xp6(1),e.hij(" ",n.list[t]," ")}}const v=[{path:"",component:T},{path:"list",component:(()=>{class s{constructor(t,n,r){this.themes=t,this.helper=n,this.currentClass=r,this.form=new i.cw({statuses:new i.Oe([])}),this.list=[]}ngOnInit(){this.list=this.themes.list(),this.list.forEach((t,n)=>{this.statuses.insert(n,new i.NI(this.helper.isUsed(this.currentClass.get(),n)))})}get statuses(){return this.form.get("statuses")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.OR),e.Y36(d),e.Y36(l.u))},s.\u0275cmp=e.Xpm({type:s,selectors:[["improve-themes-list"]],decls:7,vars:2,consts:[[3,"formGroup"],["formArrayName","statuses"],[4,"ngFor","ngForOf"],["type","submit"],["routerLink","/themes"],["type","checkbox",3,"formControlName"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"div",1),e.YNc(2,C,3,2,"div",2),e.qZA(),e.TgZ(3,"button",3),e._uU(4,"Save"),e.qZA()(),e.TgZ(5,"a",4),e._uU(6,"Retour"),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("ngForOf",n.statuses.controls))},directives:[i._Y,i.JL,i.sg,i.CE,c.sg,i.Wl,i.JJ,i.u,u.yS],styles:[""],changeDetection:0}),s})()},{path:"random",component:g}];let y=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[u.Bz.forChild(v)],u.Bz]}),s})(),x=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[c.ez]]}),s})(),U=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[c.ez,y,i.UX,x]]}),s})()}}]);