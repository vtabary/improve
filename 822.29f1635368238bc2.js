"use strict";(self.webpackChunkimprove=self.webpackChunkimprove||[]).push([[822],{4822:(L,p,r)=>{r.r(p),r.d(p,{ThemesModule:()=>M});var h=r(9808),c=r(6342),a=r(5939),e=r(1223);let x=(()=>{class n{constructor(t,s){this.themes=t,this.usedThemes=s,this.unusedIndexes={}}random(t){const s=this.randomIndex(t);return{theme:this.themes.get(s),index:s}}isUsed(t,s){return!this.getCachedUnused(t).includes(s)}setAsUsed(t,s){const i=this.getCachedUnused(t);i.slice(i.indexOf(s),1),this.setCachedUnused(t,i),this.usedThemes.add(t,s)}randomIndex(t){const s=this.getCachedUnused(t);return s[Math.floor(Math.random()*s.length)]}getUnusedIndexes(t){const s=this.usedThemes.list(t);return Array.from(this.themes.list().keys()).filter(i=>!s.includes(i))}getCachedUnused(t){return this.unusedIndexes[t]||(this.unusedIndexes[t]=this.getUnusedIndexes(t)||[]),this.unusedIndexes[t]}setCachedUnused(t,s){this.unusedIndexes[t]=s}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(a.OR),e.LFG(a.ic))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=r(9804);function T(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.theme," ")}}function v(n,o){1&n&&e._uU(0,"Aucun th\xe8me disponible")}function y(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().onNewTheme()}),e._uU(1," Nouveau th\xe8me "),e.qZA()}}let C=(()=>{class n{constructor(t,s,i){this.themes=t,this.currentClass=s,this.cdr=i,this.theme=this.getRandom()}onNewTheme(){this.theme=this.getRandom(),this.cdr.detectChanges()}getRandom(){const t=this.themes.random(this.currentClass.get());return this.themes.setAsUsed(this.currentClass.get(),t.index),t.theme}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(f.u),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["improve-themes-random"]],decls:10,vars:2,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"grow","flex","items-center","justify-center"],[1,"lg:text-2xl","text-lg"],[4,"ngIfNoTheme","ngIf"],["noTheme",""],[1,"flex","flex-row"],["routerLink","/themes",1,"grow","text-center"],["class","ui-link grow","type","button",3,"click",4,"ngIf"],["type","button",1,"ui-link","grow",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,T,2,1,"ng-container",3),e.YNc(4,v,1,0,"ng-template",null,4,e.W1O),e.qZA()(),e.TgZ(6,"div",5)(7,"a",6),e._uU(8,"Retour"),e.qZA(),e.YNc(9,y,2,0,"button",7),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf",s.theme),e.xp6(6),e.Q6J("ngIf",s.theme))},directives:[h.O5,c.yS],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0}),n})();function g(n,o,t,s,i,l,m){try{var d=n[l](m),u=d.value}catch(F){return void t(F)}d.done?o(u):Promise.resolve(u).then(s,i)}function I(n,o){if(1&n&&(e.TgZ(0,"li")(1,"span"),e._uU(2),e.qZA()()),2&n){const t=o.$implicit,s=o.index,i=e.oxw();e.xp6(1),e.ekj("line-through",i.used.includes(s))("text-gray-200",i.used.includes(s)),e.xp6(1),e.hij(" ",t,"")}}const R=[{path:"",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["improve-themes-home"]],decls:7,vars:0,consts:[["routerLink","/themes/random"],["routerLink","/themes/list"]],template:function(t,s){1&t&&(e.TgZ(0,"ul")(1,"li")(2,"a",0),e._uU(3,"Al\xe9atoire"),e.qZA()(),e.TgZ(4,"li")(5,"a",1),e._uU(6,"Liste compl\xe8te"),e.qZA()()())},directives:[c.yS],styles:[""],changeDetection:0}),n})()},{path:"list",component:(()=>{class n{constructor(t,s,i){this.themes=t,this.usedThemes=s,this.currentClass=i,this.list=[],this.used=[]}ngOnInit(){var t=this;return function _(n){return function(){var o=this,t=arguments;return new Promise(function(s,i){var l=n.apply(o,t);function m(u){g(l,s,i,m,d,"next",u)}function d(u){g(l,s,i,m,d,"throw",u)}m(void 0)})}}(function*(){t.list=t.themes.list(),t.used=t.usedThemes.list(t.currentClass.get())})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.OR),e.Y36(a.ic),e.Y36(f.u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["improve-themes-list"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],["routerLink","/themes"]],template:function(t,s){1&t&&(e.TgZ(0,"ul"),e.YNc(1,I,3,5,"li",0),e.qZA(),e.TgZ(2,"a",1),e._uU(3,"Retour"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",s.list))},directives:[h.sg,c.yS],styles:[""],changeDetection:0}),n})()},{path:"random",component:C}];let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.Bz.forChild(R)],c.Bz]}),n})();var Z=r(2382);let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.ez]]}),n})(),M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.ez,A,Z.UX,w]]}),n})()}}]);